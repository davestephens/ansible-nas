---
- name: Watchtower Docker Container
  docker_container:
    name: watchtower
    image: v2tec/watchtower
    pull: true
    volumes:
      - "/var/run/docker.sock:/var/run/docker.sock:ro"
      - "/etc/timezone:/etc/timezone:ro"
    env:
      - WATCHTOWER_NOTIFICATIONS = slack
      - WATCHTOWER_NOTIFICATION_SLACK_HOOK_URL = https://hooks.slack.com/services/???/???/???
      - WATCHTOWER_NOTIFICATION_SLACK_IDENTIFIER = watchtower-{{ ansible_nas_hostname }}
    command: --schedule "0 0 5 * * *"
    restart_policy: unless-stopped
    memory: 1g
